# 网络请求封装和优化


---


##  请求方式

还有typescript的类型定义

1. 浏览器fetch
2. axios
3. swr react-query


---


## fetch

```javascript
fetch('/api/user/hi',{
  headers:{
    apikey:'dasheng123'
  }
}).then(res=>res.json()).then(res=>{
  console.log(res)
})

```

---

## api校验 & axios
后端设置了api校验，隔一段时间会换一次，过期会报错

```javascript
axios.get('...').then()
```


## 拦截器封装
interceptors

1. 判断返回值的code，是0的话，返回data
2. 不是0的话，用antd显示报错信息
3. 请求需要获取环境变量，.env下面 VITE_开头
   1. 登录后的token
   2. api的key
